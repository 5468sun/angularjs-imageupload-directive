<html ng-app="imageuploadDemo">
    <head>
        <title>imageupload Demo</title>
    </head>
    <body ng-controller="DemoCtrl">
    <form name="contactform" class="form-horizontal">  
        <div class="control-group">
            <label class="control-label" for="inputImage">Image</label>
            <div class="controls">
                <imageupload 
                    input-id="inputImage"
                    original-image="data.imageBig"        
                    resize-image="data.image"
                    resize-quality="0.7"
                    resize-max-height="320"
                    resize-max-width="270">
                </imageupload>
                
                <button type="submit" ng-click="ok(data)">Add</button>
            </div>
        </div>
    </form>  
    
        
    <script src="angular.min.js" type="text/javascript"></script>
    <script src="canvas-to-blob.min.js" type="text/javascript"></script>
    <script type="text/javascript">
          angular.module('imageuploadDemo', [])
            .controller('DemoCtrl', function($scope, $http) {
                $scope.ok = function(data) {
                    var formData = new FormData();
                    formData.append('image', data.image, data.image.name);

                    $http.post('api/uploadimage', formData, {
                        headers: { 'Content-Type': false },
                        transformRequest: angular.identity
                    });
                };
            });
    </script>
    <script src="imageupload.js" type="text/javascript"></script>
    </body>
</html>
